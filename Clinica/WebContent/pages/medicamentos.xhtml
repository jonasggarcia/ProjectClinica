<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<title>MEDSYSTEM</title>
</h:head>
<h:body>
	<!-- <ui:composition template="../templates/template.xhtml">
		<ui:define name="content"> -->
	<b:container fluid="true">
		<ui:insert name="navTop">
			<ui:include src="../fragments/fragmentTop.xhtml" />
		</ui:insert>

		<b:row>
			<ui:insert name="navLeft">
				<ui:include src="../fragments/fragmentLeft.xhtml" />
			</ui:insert>
			<b:column col-md="9">
				<b:row>
					<h:form>
						<b:inputText style="" styleClass="edtHideSearch" value="#{MBMedicamento.search}">
							<f:ajax event="change" listener="#{MBMedicamento.setSearchValue}" />
						</b:inputText>
					</h:form>
					<b:column col-md="6">
						<h4>ÍNICIO/CADASTRO/MEDICAMENTOS</h4>
					</b:column>
					<b:column col-md="6">
						<b:form>
							<b:row>
								<b:column col-md="4">
									<b:commandButton styleClass="btRemover"
										style="float:right; margin: 8px;" look="danger"
										value="REMOVER" icon="trash" update="formRemover"
										oncomplete="$('.modalRemover').modal();unSelectRow();"></b:commandButton>
								</b:column>
								<b:column col-md="4">
									<b:commandButton ajax="true" styleClass="btEditar"
										style="float:right; margin: 8px;" look="success"
										value="EDITAR" icon="plus-sign"
										oncomplete="$('.modalEditar').modal();unSelectRow();"
										update="formEditar">
									</b:commandButton>
								</b:column>
								<b:column col-md="4">
									<h:commandLink onclick="" class="btn btn-default"
										target="_blank" value="Relatório"
										actionListener="#{MBMedicamento.chamarRelatorio}"
										update="globalMsg" />
									<b:commandButton ajax="true" style="float:right; margin: 8px;"
										look="success" value="NOVO" icon="plus-sign"
										oncomplete="$('.modalNovo').modal();"
										actionListener="#{MBMedicamento.novo}" update="formNovo">
									</b:commandButton>
								</b:column>
							</b:row>
						</b:form>
					</b:column>
				</b:row>
				<b:row>
					<b:column col-md="12">
						<b:form id="formTable">

							<b:dataTable styleClass="tableMedicamentos" selectionInfo="false"
								pdf="true"
								onselect="selectRow();ajax:MBMedicamento.onSelect(item, single, i);"
								onsearch="search();" ondeselect="unSelectRow();" select="true"
								responsive="true"
								customLangUrl="//cdn.datatables.net/plug-ins/1.10.12/i18n/Portuguese-Brasil.json"
								var="item" value="#{MBMedicamento.lista}"
								selection-mode="single">
								<f:facet name="pdf">
									<b:icon name="fa-newspaper-o"></b:icon>
								</f:facet>
								<f:facet name="header">
									<tr>
										<th>Id</th>
										<th>Nome</th>
										<th>Tipo Uso</th>
										<th>OBS</th>
										<th>Ativo</th>
									</tr>
								</f:facet>

								<b:dataTableColumn value="#{item.id}" />
								<b:dataTableColumn value="#{item.nome}" />
								<b:dataTableColumn value="#{item.tipoUso}" />
								<b:dataTableColumn value="#{item.observacao}" />
								<b:dataTableColumn value="#{item.ativo}" />

							</b:dataTable>
						</b:form>
					</b:column>
				</b:row>
			</b:column>
		</b:row>
	</b:container>

	<!-- Modals -->
	<b:form id="formNovo">
		<b:modal title="Novo Registro" id="modalNovo" styleClass="modalNovo">
			<b:panelGrid id="panelText" columns="1">
				<b:inputText id="nome" value="#{MBMedicamento.medicamento.nome}"
					label="Nome" required="true" requiredMessage="Campo Obrigatório!" />
				<b:message for="@previous" />
				<b:inputText id="tipoUso"
					value="#{MBMedicamento.medicamento.tipoUso}" label="Tipo de Uso"
					required="true" requiredMessage="Campo Obrigatório!" />
				<b:message for="@previous" />
				<b:inputTextarea rows="7" id="observacao"
					value="#{MBMedicamento.medicamento.observacao}" label="Observação" />
			</b:panelGrid>
			<f:facet name="footer">
				<b:commandButton ajax="true" style="float: right; margin:8px;"
					value="Salvar" look="primary"
					actionListener="#{MBMedicamento.salvar}"
					update="formNovo:panelText formTable globalMsg" />
				<b:button style="float: left; margin:8px;" value="Cancelar"
					look="danger" dismiss="modal" />
			</f:facet>
		</b:modal>
	</b:form>

	<b:form id="formEditar">
		<b:modal title="Editar Registro" id="modalEditar"
			styleClass="modalEditar">
			<b:panelGrid id="panelEditar" columns="1">
				<b:label text="Id: #{MBMedicamento.medicamento.id}" />
				<b:inputText id="nome" value="#{MBMedicamento.medicamento.nome}"
					label="Nome" required="true" requiredMessage="Campo Obrigatório!" />
				<b:message for="@previous" />
				<b:inputText id="tipoUso"
					value="#{MBMedicamento.medicamento.tipoUso}" label="Tipo de Uso"
					required="true" requiredMessage="Campo Obrigatório!" />
				<b:message for="@previous" />
				<b:inputTextarea rows="7" id="observacao"
					value="#{MBMedicamento.medicamento.observacao}" label="Observação" />
				<b:selectOneMenu value="#{MBMedicamento.medicamento.ativo}"
					label="Ativo:" required="true" requiredMessage="Campo Obrigatório!">
					<f:selectItem itemLabel="Sim" itemValue="Sim" />
					<f:selectItem itemLabel="Não" itemValue="Não" />
				</b:selectOneMenu>
				<b:message for="@previous" />
			</b:panelGrid>
			<f:facet name="footer">
				<b:commandButton ajax="true" style="float: right; margin:8px;"
					value="Salvar" look="primary"
					actionListener="#{MBMedicamento.editar}"
					update="formTable globalMsg"
					oncomplete="$('.modalEditar').modal('hide');" />
				<b:button style="float: left; margin:8px;" value="Cancelar"
					look="danger" dismiss="modal" />
			</f:facet>
		</b:modal>
	</b:form>

	<b:form id="formRemover">
		<b:modal title="Remover Registro" id="modalRemover"
			styleClass="modalRemover">
			<b:panelGrid id="panelRemover" columns="1">
				<b:label
					text="Deseja Remover o Medicamento #{MBMedicamento.medicamento.nome} ?" />
			</b:panelGrid>
			<f:facet name="footer">
				<b:commandButton ajax="true" style="float: right; margin:8px;"
					value="Sim" look="primary"
					actionListener="#{MBMedicamento.remover}"
					update="formTable globalMsg"
					oncomplete="$('.modalRemover').modal('hide');" />
				<b:button style="float: left; margin:8px;" value="Não" look="danger"
					dismiss="modal" />
			</f:facet>
		</b:modal>
	</b:form>

	<!-- 	</ui:define>
	</ui:composition> -->

	<script>
		function search(obj) {
			var valueSearch = $('.input-sm').val();
			$('.edtHideSearch').val(valueSearch);
		}
	</script>
</h:body>
</html>